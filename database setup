sqlite3 hubstuff.db

BEGIN;
DROP TABLE IF EXISTS Devices;
CREATE TABLE Devices (
  devIdx INTEGER,
  userName TEXT,
  modelName TEXT,
  manufName TEXT,
  nwkId TEXT,
  eui64 TEXT,
  devType TEXT,
  endPoints TEXT,
  inClusters TEXT,
  outClusters TEXT,
  binding TEXT,
  reporting TEXT,
  iasZoneType TEXT,
  powerReading INTEGER,
);

DROP TABLE IF EXISTS Status;
CREATE TABLE Status (
  devIdx INTEGER,
  battery INTEGER, battery_time DATETIME,
  temperature INTEGER, temperature_time DATETIME,
  signal INTEGER, signal_time DATETIME,
  presence TEXT, presence_time DATETIME,
  FOREIGN KEY(devIdx) REFERENCES Devices(devIdx)
);

DROP TABLE IF EXISTS Events;
CREATE TABLE Events (
  timestamp DATETIME,
  event TEXT,
  devIdx INTEGER,
  FOREIGN KEY(devIdx) REFERENCES Devices(devIdx)
);

DROP TABLE IF EXISTS Groups;
CREATE TABLE Groups (
  userName TEXT,
  devIdxList TEXT
);
COMMIT;
.quit
# Next line needed to allow Python to write back to the database
chmod 666 hubstuff.db
# Next line needed to allow SQL from Apache to write back to the database
chmod 777 ..

